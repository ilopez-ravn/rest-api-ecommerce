openapi: 3.1.0
info:
  title: Ecommerce
  description: |-
    This is the API documentation for our general porpuse ecommerce REST API

    Some useful links:
    - [RESTful API repository](https://github.com/ilopez-ravn/ecommerce)


  contact:
    email: israellopez@ravn.co
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
  version: 1.0.0
externalDocs:
  description: Find out more about the functionalities
  url: https://github.com/ilopez-ravn/ecommerce
servers:
  - url: http://localhost:8080/api/v1
  - url: https://ecomerce-api.pacasoft.app/api/v1
tags:
  - name: products
    description: Access to product data
  - name: orders
    description: Manage client's orders
  - name: carts
    description: Operations on carts
  - name: users
    description: Manage the auth actions
  - name: clients
    description: Manage clients
  - name: categories
    description: Manage product categories
  - name: tags
    description: Manage product tags
    
paths:
  /clients:
    get:
      tags:
        - clients
      summary: Get all clients
      description: Retrieve a list of all clients in the ecommerce system
      operationId: getClients
      responses:
        '200':
          description: List of clients
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Client'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth: []
                
    post:
      tags:
        - clients
      summary: Create a new client
      description: Create a new client
      operationId: createClient
      requestBody:
        description: Client object that needs to be added to the ecommerce system
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostClient'
        required: true
      responses:
        '201':
          description: Client created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Client'
        '400':
          description: Invalid input
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth: []
    
  /clients/{clientId}:

    get:
      tags:
        - clients
      summary: Get client by ID
      description: Get a single client by its unique identifier
      operationId: getClientById
      parameters:
        - name: clientId
          in: path
          description: ID of client to return
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Client'
        '400':
          description: Invalid ID supplied
        '404':
          description: Client not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    put:
      tags:
        - clients
      summary: Update an existing client by ID
      description: Update an existing client by its unique identifier
      operationId: updateClientById
      parameters:
        - name: clientId
          in: path
          description: ID of client to update
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        description: Client object that needs to be updated in the ecommerce system
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostClient'
        required: true
      responses:
        '200':
          description: Client updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Client'
        '400':
          description: Invalid input
        '404':
          description: Client not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth: []

    delete:
      tags:
        - clients
      summary: Delete a client by ID
      description: Delete a single client by its unique identifier
      operationId: deleteClientById
      parameters:
        - name: clientId
          in: path
          description: ID of client to delete
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: Client deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Client deleted successfully
        '400':
          description: Invalid ID supplied
        '404':
          description: Client not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth: []

  /clients/{clientId}/addresses:

    get:
      tags:
        - clients
      summary: Get addresses of a client
      description: Retrieve a list of addresses for a specific client
      operationId: getClientAddresses
      parameters:
        - name: clientId
          in: path
          description: ID of client to retrieve addresses for
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: List of addresses for the client
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Address'
        '400':
          description: Invalid ID supplied
        '404':
          description: Client not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    post:
      tags:
        - clients
      summary: Add address to client
      description: Add a new address to an existing client
      operationId: addAddressToClient
      parameters:
        - name: clientId
          in: path
          description: ID of client to add the address to
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        description: Address object that needs to be added to the client
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostAddress'
        required: true
      responses:
        '201':
          description: Address added to client successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Address'
        '400':
          description: Invalid input
        '404':
          description: Client not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

                
  /clients/{clientId}/addresses/{addressId}:
    put:
      tags:
        - clients
      summary: Update address of a client
      description: Update an existing address of a client
      operationId: updateClientAddress
      parameters:
        - name: clientId
          in: path
          description: ID of client to update the address for
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        description: Address object that needs to be updated for the client
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostAddress'
        required: true
      responses:
        '200':
          description: Address updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Address'
        '400':
          description: Invalid input
        '404':
          description: Client or Address not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete: 
      tags:
        - clients
      summary: Delete address of a client
      description: Delete an existing address of a client
      operationId: deleteClientAddress
      parameters:
        - name: clientId
          in: path
          description: ID of client to delete the address from
          required: true
          schema:
            type: integer
            format: int64
        - name: addressId
          in: path
          description: ID of address to delete
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: Address deleted successfully
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                    example: Address deleted successfully
        '400':
          description: Invalid input
        '404':
          description: Client or Address not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

                
  /products:
    get:
      tags:
        - products
      summary: Get active products by filters
      description: Get, filter and search active products available in the ecommerce
      operationId: getProducts
      parameters:
        - name: filter
          in: query
          description: Allows search the product by custom text on name or description
          required: false
          explode: true
          schema:
            type: string
        - name: name
          in: query
          description: Filter products by name
          required: false
          explode: true
          schema:
            type: string
        - name: category_id
          in: query
          schema:
            type: integer
            format: int64
          description: Filter products by category ID
          required: false
        - name: tags_id
          in: query
          description: Filter products by tags ID
          required: false
          explode: true
          schema:
            type: array
            items:
              type: integer
              format: int64
        - name: page
          in: query
          description: Page number for pagination
          required: false
          schema:
            type: integer
            default: 1
        - name: page_size
          in: query
          description: Number of products per page
          required: false
          schema:
            type: integer
            default: 10
        - name: sort_by
          in: query
          description: Field to sort the products by (e.g., name, price)
          required: false
          schema:
            type: string
        - name: sort_order
          in: query
          description: Sort order (asc for ascending, desc for descending)
          required: false
          schema:
            type: string
            enum:
              - asc
              - desc
            default: desc
        - name: price_min
          in: query
          description: Filter products with price greater than or equal to this value
          required: false
          schema:
            type: number
            format: float
        - name: price_max
          in: query
          description: Filter products with price less than or equal to this value
          required: false
          schema:
            type: number
            format: float
        - name: available
          in: query
          description: Filter products by availability status
          required: false
          schema:
            type: boolean
            default: true
      
      responses:
        '200':
          description: List of products
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Product'
        '400':
          description: Invalid filter value
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post: 
      tags:
        - products
      summary: Create a new product
      description: Create a new product in the ecommerce
      operationId: createProduct
      requestBody:
        description: Product object that needs to be added to the ecommerce
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostProduct'
        required: true
      responses:
        '201':
          description: Product created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
        '400':
          description: Invalid input
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

      security:
        - bearerAuth : []


  /products/{productId}/status:
    patch:
      tags:
        - products
      summary: Disable or enable a product by ID
      description: Disable or enable a single product by its unique identifier
      operationId: disableOrEnableProductById
      parameters:
        - name: productId
          in: path
          description: ID of product to disable or enable
          required: true
          schema:
            type: integer
            format: int64
        - name: status
          in: query
          description: Status to set for the product (true for enable, false for disable)
          required: true
          schema:
            type: boolean
      responses:
        '200':
          description: Product status updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
        '400':
          description: Invalid ID supplied
        '404':
          description: Product not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth : []

      

  
  /products/{productId}:
    get:
      tags:
        - products
      summary: Get product by ID
      description: Get a single product by its unique identifier
      operationId: getProductById
      parameters:
        - name: productId
          in: path
          description: ID of product to return
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
        '400':
          description: Invalid ID supplied
        '404':
          description: Product not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    put:
      tags:
        - products
      summary: Update an existing product
      description: Update an existing product in the ecommerce
      operationId: updateProduct
      requestBody:
        description: Product object that needs to be updated in the ecommerce
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostProduct'
        required: true
      responses:
        '200':
          description: Product updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
        '400':
          description: Invalid input
        '404':
          description: Product not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth : []
    
                
    delete:
      tags:
        - products
      summary: Delete a product
      description: Delete a product from the ecommerce
      operationId: deleteProduct
      parameters:
        - name: productId
          in: query
          description: ID of product to delete
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: Product deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Product deleted successfully
        '400':
          description: Invalid ID supplied
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '404':
          description: Product not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth : []

  /products/{productId}/liked:
    put:
      tags:
        - products
      summary: Like or unlike a product for a specific client
      description: Like or unlike for a specific client 
      operationId: likeOrUnlikeProduct
      parameters:
        - name: productId
          in: path
          description: ID of product to like or unlike
          required: true
          schema:
            type: integer
            format: int64
        - name: liked
          in: query
          description: Like status to set for the product (true for like, false for unlike)
          required: true
          schema:
            type: boolean
      requestBody:
        description: User object that performs the like or unlike action
        content:
          application/json:
            schema:
              type: object
              properties:
                client_id:
                  type: integer
                  format: int64
        required: true

      responses:
        '200':
          description: Product like status updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Product liked successfully
        '400':
          description: Invalid ID supplied
        '404':
          description: Product not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

                
  /products/stock:
    patch:
      tags:
        - products
      summary: Update stock levels for multiple products
      description: Update stock levels for multiple products in the ecommerce
      operationId: updateProductStocks
      requestBody:
        description: List of product stock updates
        content:
          application/json:
            schema:
              type: array
              items:
                type: object
                properties:
                  product_id:
                    type: integer
                    format: int64
                  type:
                    type: string
                    enum:
                      - increase
                      - decrease
                  quantity:
                    type: integer
        required: true
      responses:
        '200':
          description: Product stocks updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Product stocks updated successfully
        '400':
          description: Invalid input
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth : []

  /users:
    post:
      tags:
        - users
      summary: Create a new user
      description: Create a new user in the ecommerce system
      operationId: createUser
      requestBody:
        description: User object that needs to be added to the ecommerce system
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                password:
                  type: string
                role_id:
                  type: integer
                  format: int64
                phone:
                  type: string
                email:
                  type: string
                first_name:
                  type: string
                last_name:
                  type: string
        required: true
      responses:
        '201':
          description: User created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                    format: int64
                  username:
                    type: string
                  phone:
                    type: string
                  email:
                    type: string
                  first_name:
                    type: string
                  last_name:
                    type: string
        '400':
          description: Invalid input
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth : []

  /users/{userId}:
    put: 
      tags:
        - users
      summary: Update an existing user by ID
      description: Update an existing user by its unique identifier
      operationId: updateUserById
      parameters:
        - name: userId
          in: path
          description: ID of user to update
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        description: User object that needs to be updated in the ecommerce system
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                password:
                  type: string
                role_id:
                  type: integer
                  format: int64
                phone:
                  type: string
                email:
                  type: string
                first_name:
                  type: string
                last_name:
                  type: string
        required: true
      responses:
        '200':
          description: User updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                    format: int64
                  username:
                    type: string
                  email:
                    type: string
                  first_name:
                    type: string
                  last_name:
                    type: string
        '400':
          description: Invalid input
        '404':
          description: User not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth: []

    delete:
      tags:
        - users
      summary: Delete a user by ID
      description: Delete a single user by its unique identifier
      operationId: deleteUserById
      parameters:
        - name: userId
          in: path
          description: ID of user to delete
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: User deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: User deleted successfully
        '400':
          description: Invalid ID supplied
        '404':
          description: User not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth : []


  /users/{userId}/status:
    put:
      tags:
        - users
      summary: Disable or enable a user by ID
      description: Disable or enable a single user by its unique identifier
      operationId: disableOrEnableUserById
      parameters:
        - name: userId
          in: path
          description: ID of user to disable or enable
          required: true
          schema:
            type: integer
            format: int64
        - name: status
          in: query
          description: Status to set for the user (true for enable, false for disable)
          required: true
          schema:
            type: boolean
      responses:
        '200':
          description: User status updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: User status updated successfully
        '400':
          description: Invalid ID supplied
        '404':
          description: User not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth : []

  /orders:
    get:
      tags:
        - orders
      summary: Get all orders
      description: Retrieve a list of all orders placed in the ecommerce
      operationId: getOrders
      parameters:
        - name: client_id
          in: query
          description: Filter orders by client ID
          required: false
          schema:
            type: integer
            format: int64
        - name: status
          in: query
          description: Filter orders by status
          required: false
          schema:
            type: string
            enum:
              - pending
              - approved
              - preparing
              - delivered
              - delayed
        - name: page
          in: query
          description: Page number for pagination
          required: false
          schema:
            type: integer
            default: 1
        - name: page_size
          in: query
          description: Number of orders per page
          required: false
          schema:
            type: integer
            default: 10

        - name: sort_by
          in: query
          description: Field to sort the orders by (e.g., date, total_amount)
          required: false
          schema:
            type: string
        - name: sort_order
          in: query
          description: Sort order (asc for ascending, desc for descending)
          required: false
          schema:
            type: string
            enum:
              - asc
              - desc
            default: desc
        - name: date_from
          in: query
          description: Filter orders from this date (YYYY-MM-DD)
          required: false
          schema:
            type: string
            format: date
        - name: date_to
          in: query
          description: Filter orders up to this date (YYYY-MM-DD)
          required: false
          schema:
            type: string
            format: date

      responses:
        '200':
          description: List of orders
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Order'
        '400':
          description: Invalid filter value
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      
    post:
      tags:
        - orders
      summary: Create a new order
      description: Create a new order in the ecommerce based on the cart choosing the address and the warehouse where products will come from
      operationId: createOrder
      requestBody:
        description: Order data needed for billing and tracking
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NewOrder'
        required: true
      responses:
        '201':
          description: Order created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Order'
        '400':
          description: Invalid input
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"


  /orders/{orderId}:
    get:
      tags:
        - orders
      summary: Get order by ID
      description: Retrieve an order by its unique identifier
      operationId: getOrderById
      parameters:
        - name: orderId
          in: path
          description: ID of order to retrieve
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Order'
        '400':
          description: Invalid ID supplied
        '404':
          description: Order not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    delete:
      tags:
        - orders
      summary: Delete an order by ID
      description: Delete a single order by its unique identifier
      operationId: deleteOrderById
      parameters:
        - name: orderId
          in: path
          description: ID of order to delete
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: Order deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Order deleted successfully
        '400':
          description: Invalid ID supplied
        '404':
          description: Order not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth : []

  /carts:
    post: 
      tags:
        - carts
      summary: Create a new cart
      description: Create a new cart in the ecommerce
      operationId: createCart

      responses:
        '201':
          description: Cart created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cart'
        '400':
          description: Invalid input
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
            
  /carts/{cartId}:
    get:
      tags:
        - carts
      summary: Get cart by ID
      description: Retrieve a cart by its unique identifier
      operationId: getCartById
      parameters:
        - name: cartId
          in: path
          description: ID of cart to retrieve
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cart'
        '400':
          description: Invalid ID supplied
        '404':
          description: Cart not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    put: 
      tags:
        - carts
      summary: Update cart by ID
      description: Allow to assign client id, cart status and clear products list
      operationId: updateCartById
      parameters:
        - name: cartId
          in: path
          description: ID of cart to update
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        description: Cart object that needs to be updated in the ecommerce
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCart'
        required: true
      responses:
        '200':
          description: Cart updated successfully
          content:
            application/json:
              schema:
                properties:
                  message: 
                    type: string
                    example: Cart updated successfully
        '400':
          description: Invalid input
        '404':
          description: Cart not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"


  /carts/{cartId}/products:
    post:
      tags:
        - carts
      summary: Add product to cart
      description: Add a product to an existing cart
      operationId: addProductToCart
      requestBody:
        description: Product and cart information to add the product to the cart
        content:
          application/json:
            schema:
              type: object
              properties:
                product_id:
                  type: integer
                  format: int64
                quantity:
                  type: integer
      responses:
        '201':
          description: Product added to cart successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cart'
        '400':
          description: Invalid input
        '404':
          description: Cart or Product not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /carts/{cartId}/products/{cardDetailId}:
    put: 
      tags:
        - carts
      summary: Update product quantity in cart
      description: Update the quantity of a specific product in an existing cart
      operationId: updateProductQuantityInCart
      parameters:
        - name: productId
          in: path
          description: ID of product to update in the cart
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        description: Cart ID and new quantity for the product
        content:
          application/json:
            schema:
              type: object
              properties:
                quantity:
                  type: integer
        required: true
      responses:
        '200':
          description: Product quantity updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cart'
        '400':
          description: Invalid input
        '404':
          description: Cart or Product not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      tags:
        - carts
      summary: Remove product from cart
      description: Remove a specific product from an existing cart
      operationId: removeProductFromCart
      parameters:
        - name: cartId
          in: path
          description: ID of product to remove from the cart
          required: true
          schema:
            type: integer
            format: int64
        - name: cardDetailId
          in: path
          description: ID of cart to remove the product from
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: Product removed from cart successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cart'
        '400':
          description: Invalid input
        '404':
          description: Cart or Product not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
                
  /carts/clients/{clientId}:
    get:
      tags:
        - carts
      summary: Get or create cart by client ID
      description: Retrieve the cart for a specific client by their unique identifier, retrieves an active cart
      operationId: getCartByClientId
      parameters:
        - name: clientId
          in: path
          description: ID of client to retrieve the cart for
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cart'
        '400':
          description: Invalid ID supplied
        '404':
          description: Cart not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth : []


  #/payments

  /categories:
    get:
      tags:
        - categories
      summary: Get all product categories
      description: Retrieve a list of all product categories available in the ecommerce
      operationId: getCategories
      responses:
        '200':
          description: List of product categories
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Category'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      tags:
        - categories
      summary: Create a new product category
      description: Create a new category for products in the ecommerce
      operationId: createCategory
      requestBody:
        description: Category object that needs to be added to the ecommerce
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
        required: true
      responses:
        '201':
          description: Category created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
        '400':
          description: Invalid input
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth : []

  /categories/{categoryId}:
    put:
      tags:
        - categories
      summary: Update an existing product category
      description: Update an existing category in the ecommerce
      operationId: updateCategory
      parameters:
        - name: categoryId
          in: path
          description: ID of category to update
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        description: Category object that needs to be updated in the ecommerce
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
        required: true
      responses:
        '200':
          description: Category updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
        '400':
          description: Invalid input
        '404':
          description: Category not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth : []

    delete:
      tags:
        - categories
      summary: Delete a product category
      description: Delete a category from the ecommerce
      operationId: deleteCategory
      parameters:
        - name: categoryId
          in: path
          description: ID of category to delete
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: Category deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Category deleted successfully
        '400':
          description: Invalid ID supplied
        '404':
          description: Category not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth : []


  /tags:
    get:
      tags:
        - tags
      summary: Get all product tags
      description: Retrieve a list of all product tags available in the ecommerce
      operationId: getTags
      responses:
        '200':
          description: List of product tags
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Tag'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      tags:
        - tags
      summary: Create a new product tag
      description: Create a new tag for products in the ecommerce
      operationId: createTag
      requestBody:
        description: Tag object that needs to be added to the ecommerce
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
        required: true
      responses:
        '201':
          description: Tag created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tag'
        '400':
          description: Invalid input
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth : []

  /tags/{tagId}:
    put:
      tags:
        - tags
      summary: Update an existing product tag
      description: Update an existing tag in the ecommerce
      operationId: updateTag
      parameters:
        - name: tagId
          in: path
          description: ID of tag to update
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        description: Tag object that needs to be updated in the ecommerce
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
        required: true
      responses:
        '200':
          description: Tag updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tag'
        '400':
          description: Invalid input
        '404':
          description: Tag not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth : []

    delete:
      tags:
        - tags
      summary: Delete a product tag
      description: Delete a tag from the ecommerce
      operationId: deleteTag
      parameters:
        - name: tagId
          in: path
          description: ID of tag to delete
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: Tag deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Tag deleted successfully
        '400':
          description: Invalid ID supplied
        '404':
          description: Tag not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth : []



  
  /users/login:
    post:
      tags:
        - users
      summary: Logs user into the system.
      description: Log user into the system.
      operationId: loginUser
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                username:
                  type: string
                password:
                  type: string
      responses:
        '201':
          description: Successful operation
          headers:
            X-Rate-Limit:
              description: calls per hour allowed by the user
              schema:
                type: integer
                format: int32
            X-Expires-After:
              description: date in UTC when token expires
              schema:
                type: string
                format: date-time
          content:
            application/json:
              schema:
                properties:
                  access_token:
                    type: string
            application/xml:
              schema:
                type: string

        '400':
          description: Invalid username/password supplied
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  
  /users/{username}:
    get:
      tags:
        - users
      summary: Get user by user name.
      description: Get user details based on username.
      operationId: getUserByName
      parameters:
        - name: username
          in: path
          description: The name that needs to be fetched. Use user1 for testing
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
            application/xml:
              schema:
                $ref: '#/components/schemas/User'
        '400':
          description: Invalid username supplied
        '404':
          description: User not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth: []

    put:
      tags:
        - users
      summary: Update user.
      description: This can only be done by the logged in user.
      operationId: updateUser
      parameters:
        - name: username
          in: path
          description: The name that needs to be updated
          required: true
          schema:
            type: string
      requestBody:
        description: Update an existent user in the store
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'
          application/xml:
            schema:
              $ref: '#/components/schemas/User'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/User'
      responses:
        '200':
          description: Successful operation
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth: []

    delete:
      tags:
        - users
      summary: Delete user.
      description: This can only be done by the logged in user.
      operationId: deleteUser
      parameters:
        - name: username
          in: path
          description: The name that needs to be deleted
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Successful operation
        '400':
          description: Invalid username supplied
        '404':
          description: User not found
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - bearerAuth: []

components:
  schemas:
    Product:
      type: object
      properties:
        id:
          type: integer
          format: int64
          examples: [10]
        name:
          type: string
          examples: ["Lavadora"]
        description:
          type: string
          examples: ["Lorem ipsum"] 
        created_by:
          type: integer
          format: int64
          examples: [1]
        price:
          type: number
          examples: [19.99] 
        category_id:
          type: integer
          format: int64
          examples: [1]
        tag_list:
          type: array
          xml:
            name: tags
            wrapped: true
          items:
            type: integer
            format: int64
    
    PostProduct:
      type: object
      properties:
        name:
          type: string
          examples: ["Lavadora"]
        description:
          type: string
          examples: ["Lorem ipsum"] 
        created_by:
          type: integer
          format: int64
          examples: [1]
        price:
          type: number
          examples: [19.99] 
        category_id:
          type: integer
          format: int64
          examples: [1]
        tag_list: 
          type: array
          xml:
            name: tags
            wrapped: true
          items:
            type: integer
            format: int64
    NewOrder:
      type: object
      properties:
        id:
          type: integer
          format: int64
          examples: [10]
        warehouse_id:
          type: integer
          format: int64
          examples: [1]
        cart_id:
          type: integer
          format: int64
          examples: [5]
        address_id:
          type: integer
          format: int64
          examples: [3]
      xml:
        name: order


    Order:
      type: object
      properties:
        id:
          type: integer
          format: int64
          examples: [10]
        client_id:
          type: integer
          format: int64
          examples: [32]
        warehouse_id:
          type: integer
          format: int64
          examples: [1]
        order_date:
          type: string
          format: date-time
        document_number:
          type: string
          examples: ["FA123"]
        total_amount:
          type: number
          format: float
          examples: [150.75]
        tax_amount:
          type: number
          format: float
          examples: [27.14]
        delivery_fee:
          type: number
          format: float
          examples: [5.00]
        address_info:
          $ref: '#/components/schemas/Address'
        delivery_info:
          $ref: '#/components/schemas/DeliveryTracking'
        payment_info:
          $ref: '#/components/schemas/stripePayment'
      xml:
        name: order
   
    UpdateCart:
      type: object
      properties:
        client_id:
          type: integer
          format: int64
          examples: [10]
        status: 
          type: string
          examples: [open]
          xml:
            name: products
            wrapped: true
        clear_products:
          type: boolean
          examples: [false]
      xml:
        name: cart

    NewCart:
      type: object
      properties:
        id:
          type: integer
          format: int64
          examples: [1]
        status: 
          type: string
          examples: [open]
        products:
          type: array
          xml:
            name: products
            wrapped: true
          items:
            $ref: '#/components/schemas/Product'
      xml:
        name: cart
    Cart:
      type: object
      properties:
        id:
          type: integer
          format: int64
          examples: [1]
        client_id:
          type: integer
          format: int64
          examples: [10]
        status: 
          type: string
          examples: [open]
        products:
          type: array
          xml:
            name: products
            wrapped: true
          items:
            $ref: '#/components/schemas/CartDetail'
      xml:
        name: cart
    
    CartDetail: 
      type: object
      properties:
        id:
          type: integer
          format: int64
          examples: [1]
        price:
          type: number
          format: float
          examples: [19.99]
        quantity:
          type: integer
          examples: [3] 
        total:
          type: number
          format: float
          examples: [59.97]

        product:
            $ref: '#/components/schemas/Product'
      xml:
        name: cartDetail

    Category:
      type: object
      properties:
        id:
          type: integer
          format: int64
          examples: [1]
        name:
          type: string
          examples: [Electronics]
      xml:
        name: category
    EmployeeUser:
      type: object
      properties:
        id:
          type: integer
          format: int64
          examples: [10]
        first_name:
          type: string
          examples: [theEmployee]
        last_name:
          type: string
          examples: [Jane]
        email:
          type: string
          examples: [Doe]
        phone:
          type: string
          examples: ['12345']
        user_id: 
          type: integer
          format: int64
          examples: [5]
    Client: 
      type: object
      properties:
        id:
          type: integer
          format: int64
          examples: [10]
        first_name:
          type: string
          examples: ["Israel"]
        last_name:
          type: string
        email:
          type: string
          examples: ["example@test.com"]
        phone:
          type: string
          examples: ["12345"]
        document:
          type: string
          examples: ["DNI"]
        document_type:
          type: string
          examples: ["123"]

    PostClient:
      type: object
      properties:
        first_name:
          type: string
          examples: ["Israel"]
        last_name:
          type: string
          examples: ["Lopez"]
        email:
          type: string
          examples: ["example@test.com"]
        phone:
          type: string
          examples: ["12345"]
        document:
          type: string
          examples: ["DNI"]
        document_type:
          type: string
          examples: ["12345678"]
    DeliveryTracking:
      type: object
      properties:
        id:
          type: integer
          format: int64
          examples: [1]
        order_id:
          type: integer
          format: int64
          examples: [10]
        address_id:
          type: integer
          format: int64
          examples: [3]
        tracking_number:
          type: string
          examples: [TRK123456]
        assigned_to:
          type: integer
          format: int64
          examples: [5]
        status:
          type: string
          examples: [pending]
          enum:
            - pending
            - approved
            - preparing
            - delivered
            - delayed
        estimated_delivery_date:
          type: string
          format: date-time

    stripePayment:
      type: object
      properties:
        id:
          type: integer
          format: int64
          examples: [1]
        order_id:
          type: integer
          format: int64
          examples: [10]
        payment_type:
          type: string
          examples: [stripe]
        amount:
          type: number
          format: float
          examples: [150.75]
        currency:
          type: string
          examples: [USD]
        status:
          type: string
          examples: [succeeded]
          enum:
            - succeeded
            - pending
            - failed
        payment_method:
          type: string
          examples: [card]

    Address:
      type: object
      properties:
        id:
          type: integer
          format: int64
          examples: [1]
        client_id:
          type: integer
          format: int64
          examples: [10]
        address_line1:
          type: string
          examples: ["123 Main Street"]
        address_line2:
          type: string
          examples: ["Apt 4B"]
        city:
          type: string
          examples: ["Lima"]
        state:
          type: string
          examples: ["Lima"]
        postal_code:
          type: string
          examples: ["15001"]
        country:
          type: string
          examples: ["Peru"]
          default: "Peru"
        created_at:
          type: string
          format: date-time
    PostAddress:
      type: object
      properties:
        address_line1:
          type: string
          examples: ["123 Main Street"]
        address_line2:
          type: string
          examples: ["Apt 4B"]
        city:
          type: string
          examples: ["Lima"]
        state:
          type: string
          examples: ["Lima"]
        postal_code:
          type: string
          examples: ["15001"]
        country:
          type: string
          examples: ["Peru"]
          default: "Peru"
        created_at:
          type: string
          format: date-time
        
    User:
      type: object
      properties:
        id:
          type: integer
          format: int64
          examples: [10]
        username:
          type: string
          examples: ['username']
        password:
          type: string
          examples: ['12345']
    Tag:
      type: object
      properties:
        id:
          type: integer
          format: int64
        name:
          type: string
      xml:
        name: tag

    ApiResponse:
      type: object
      properties:
        code:
          type: integer
          format: int32
        type:
          type: string
        message:
          type: string
      xml:
        name: '##default'
    Error:
      type: object
      properties:
        code:
          type: string
        message:
          type: string
      required:
        - code
        - message
  # requestBodies:
  securitySchemes:
    bearerAuth: # arbitrary name for the security scheme
      type: http
      scheme: bearer
      bearerFormat: JWT # optional, arbitrary value for documentation purposes
